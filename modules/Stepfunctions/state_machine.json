{
  "Comment": "Offline video crash detection: single Lambda does split → Rekognition → alert → cleanup",
  "Version": "1.0",
  "StartAt": "ProcessVideo",
  "States": {
    "ProcessVideo": {
      "Type": "Task",
      "Resource": "arn:aws:states:::lambda:invoke",
      "Parameters": {
        "FunctionName": "arn:aws:lambda:${Region}:${AccountId}:function:process-video",
        "Payload": {
          "video_bucket.$": "$.bucket",
          "video_key.$": "$.key",
          "dump_bucket.$": "$.dump_bucket"
        }
      },
      "OutputPath": "$.Payload",
      "End": true
    }
  }
}
